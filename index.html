<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แผนที่ Stardoi Farm Khaoyai</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Rye&display=swap" rel="stylesheet">
    <style>
        /* General Styling */
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f4f8f4;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #333;
        }

        /* English Font Style */
        body.lang-en, body.lang-en .modal-content {
            font-family: 'Rye', cursive;
        }

        h1 {
            font-family: 'Rye', cursive; /* Apply Rye to H1 for all languages */
            color: #4CAF50;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        p {
            text-align: center;
            max-width: 800px;
            color: #555;
        }

        /* Language Switcher */
        #lang-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .lang-btn {
            background-color: transparent;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            font-family: 'Kanit', sans-serif;
            font-size: 14px;
            border-radius: 7px;
            transition: background-color 0.3s, color 0.3s;
            color: #555;
        }
        body.lang-en .lang-btn {
             font-family: 'Kanit', sans-serif; /* Keep button font consistent */
        }

        .lang-btn.active {
            background-color: #4CAF50;
            color: white;
            font-weight: 600;
        }

        /* Map Container */
        #map-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border: 8px solid #ffffff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-radius: 15px;
            background: #fff;
        }

        #map-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        /* Point of Interest (POI) Styling */
        .poi {
            position: absolute;
            width: 18px;
            height: 18px;
            background-color: rgba(255, 82, 82, 0.85);
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            transform: translate(-50%, -50%);
            animation: pulse 1.8s infinite;
            box-shadow: 0 0 0 rgba(255, 82, 82, 0.4);
            transition: transform 0.3s ease;
        }

        .poi:hover {
            animation-play-state: paused;
            transform: translate(-50%, -50%) scale(1.4);
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(0.9); box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.5); }
            70% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 0 10px rgba(255, 82, 82, 0); }
            100% { transform: translate(-50%, -50%) scale(0.9); box-shadow: 0 0 0 0 rgba(255, 82, 82, 0); }
        }
        
        /* POI Positions */
        #poi-tickets { top: 88%; left: 7%; }
        #poi-photos { top: 78%; left: 30%; }
        #poi-cafe { top: 24%; left: 45%; }
        #poi-horse { top: 42%; left: 18%; }
        #poi-kayak { top: 35%; left: 80%; }
        #poi-sheep-feed { top: 15%; left: 23%; }
        #poi-lamb-feed { top: 26%; left: 16.5%; }
        #poi-duck { top: 12%; left: 74%; }
        #poi-peafowl { top: 16.5%; left: 75%; }
        #poi-rabbit { top: 30%; left: 77%; }
        #poi-drawing { top: 30.5%; left: 72%; }
        #poi-restroom { top: 22.5%; left: 41%; } 
        #poi-albino-buffalo { top: 78.5%; left: 18%; }
        #poi-souvenirs { top: 26%; left: 6%; }
        #poi-snacks { top: 72%; left: 33%; }

        /* Modal (Popup) Styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-sizing: border-box;
        }

        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            width: 95%;
            max-width: 650px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            animation: slide-down 0.5s ease-out;
            position: relative;
        }
        
        @keyframes slide-down {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-button:hover,
        .close-button:focus {
            color: #000;
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }

        #speak-btn {
            background: #f0f0f0;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
            flex-shrink: 0;
        }
        #speak-btn:hover {
            background: #e0e0e0;
        }
        #speak-btn svg {
            width: 22px;
            height: 22px;
            fill: #555;
        }

        @keyframes image-enter {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        #media-container {
            width: 100%;
            margin-bottom: 20px;
        }
        
        #media-container img {
            width: 100%;
            max-height: 45vh;
            object-fit: contain;
            border-radius: 10px;
            animation: image-enter 0.5s ease-out;
            transition: transform 0.4s ease;
        }

        #media-container img:hover {
            transform: scale(1.03);
        }

        .slideshow-container {
            position: relative;
            width: 100%;
        }

        .slide {
            display: none;
        }

        .slide.active {
            display: block;
        }

        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 20px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0,0,0,0.3);
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }

        #modal-title {
            margin-top: 0;
            margin-bottom: 0;
            color: #4CAF50;
            font-size: 2em;
        }

        #modal-description {
            font-size: 1.1em;
            line-height: 1.7;
            color: #555;
            margin-top: 15px;
        }
        
        #modal-description h4 {
            color: #333;
            border-left: 4px solid #8BC34A;
            padding-left: 10px;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        /* --- Floating Action Buttons Container --- */
        #fab-container {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 999;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .fab {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
            padding: 0;
            overflow: hidden;
        }
        .fab:hover {
            transform: scale(1.1);
        }
        .fab img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        #fun-fact-btn {
            background-color: white;
        }
        #fun-fact-btn img {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }
        
        #facebook-btn, #tiktok-btn {
            background-color: transparent;
        }
        
        /* Fact Modal Styles */
        #fact-modal-content {
            text-align: center;
        }
        #fact-title {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        #fact-text {
            font-size: 1.2em;
            color: #333;
        }

    </style>
</head>
<body>

    <div id="lang-switcher">
        <button class="lang-btn active" data-lang="th">ไทย</button>
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="zh">中文</button>
    </div>

    <h1 data-translate-key="main_title">Stardoi Farm Khaoyai</h1>
    <p data-translate-key="main_subtitle">ยินดีต้อนรับสู่สตาร์ดอยฟาร์ม เขาใหญ่! คลิกที่จุดกระพริบสีแดงบนแผนที่เพื่อสำรวจและเรียนรู้เกี่ยวกับกิจกรรมต่างๆ ที่น่าสนใจภายในฟาร์มของเรา</p>

    <div id="map-container">
        <img id="map-image" src="https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/FirstPage.jpg" alt="แผนที่ฟาร์มแกะ Stardoi Khaoyai" onerror="this.onerror=null;this.src='https://placehold.co/800x1132/a8e6cf/ffffff?text=แผนที่ฟาร์ม';">
        
        <div class="poi" id="poi-tickets" data-id="tickets"></div>
        <div class="poi" id="poi-photos" data-id="photos"></div>
        <div class="poi" id="poi-cafe" data-id="cafe"></div>
        <div class="poi" id="poi-horse" data-id="horse"></div>
        <div class="poi" id="poi-kayak" data-id="kayak"></div>
        <div class="poi" id="poi-sheep-feed" data-id="sheep-feed"></div>
        <div class="poi" id="poi-lamb-feed" data-id="lamb-feed"></div>
        <div class="poi" id="poi-duck" data-id="duck"></div>
        <div class="poi" id="poi-peafowl" data-id="peafowl"></div>
        <div class="poi" id="poi-rabbit" data-id="rabbit"></div>
        <div class="poi" id="poi-drawing" data-id="drawing"></div>
        <div class="poi" id="poi-restroom" data-id="restroom"></div>
        <div class="poi" id="poi-albino-buffalo" data-id="albino-buffalo"></div>
        <div class="poi" id="poi-souvenirs" data-id="souvenirs"></div>
        <div class="poi" id="poi-snacks" data-id="snacks"></div>
    </div>

    <div id="fab-container">
        <a id="tiktok-btn" class="fab" href="https://www.tiktok.com/@somkidstardoi" target="_blank" title="TikTok">
            <img src="https://i.pinimg.com/736x/0b/db/be/0bdbbef30f3d9833eb35f3befadd4b27.jpg" alt="TikTok">
        </a>
        <a id="facebook-btn" class="fab" href="https://www.facebook.com/stardoifarmkhaoyai" target="_blank" title="Facebook Page">
            <img src="https://s.yimg.com/zb/imgv1/ff6c2336-05c2-34bf-8d42-c8eb48fbacf1/t_500x300" alt="Facebook">
        </a>
        <button id="fun-fact-btn" class="fab">
            <img src="https://cdn-icons-png.flaticon.com/512/9908/9908215.png" alt="Fun Fact">
        </button>
    </div>

    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div class="modal-header">
                <h2 id="modal-title"></h2>
                <button id="speak-btn" title="Read aloud">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.016 3.234q3.047 0 5.273 2.227t2.227 5.273-2.227 5.273-5.273 2.227v-2.062q2.109 0 3.609-1.5t1.5-3.609-1.5-3.609-3.609-1.5-3.609 1.5-1.5 3.609h-2.062q0-3.047 2.227-5.273t5.273-2.227zM1 9.984v4.031h3.984l5.016 5.016v-14.062l-5.016 5.016h-3.984z"></path></svg>
                </button>
            </div>
            <div id="media-container"></div>
            <div id="modal-description"></div>
        </div>
    </div>

    <div id="factModal" class="modal">
        <div class="modal-content" id="fact-modal-content">
            <span class="close-button">&times;</span>
            <h2 id="fact-title"></h2>
            <p id="fact-text"></p>
        </div>
    </div>

    <script>
        let currentLang = 'th'; // Default language

        const translations = {
            main_title: {
                th: 'Stardoi Farm Khaoyai',
                en: 'Stardoi Farm Khaoyai',
                zh: 'Stardoi Farm Khaoyai'
            },
            main_subtitle: {
                th: 'ยินดีต้อนรับสู่สตาร์ดอยฟาร์ม เขาใหญ่! คลิกที่จุดกระพริบสีแดงบนแผนที่เพื่อสำรวจและเรียนรู้เกี่ยวกับกิจกรรมต่างๆ ที่น่าสนใจภายในฟาร์มของเรา',
                en: 'Welcome to Stardoi Farm Khaoyai ! Click on the flashing red dots on the map to explore and learn about the interesting activities within our farm.',
                zh: '欢迎来到 Stardoi Farm Khaoyai 绵羊农场！点击地图上闪烁的红点，探索和了解我们农场内有趣的活动。'
            },
            fun_fact_title: {
                th: 'เกร็ดความรู้!',
                en: 'Fun Fact!',
                zh: '趣闻！'
            },
            fun_fact_tooltip: {
                th: 'เกร็ดความรู้สุ่ม',
                en: 'Random Fun Fact',
                zh: '随机趣闻'
            },
            tiktok_tooltip: {
                th: 'TikTok',
                en: 'TikTok',
                zh: '抖音'
            }
        };

        const poiData = {
            tickets: {
                th: { title: 'จุดขายตั๋ว', description: `<p>เริ่มต้นการผจญภัยในฟาร์มของเราที่นี่! จุดจำหน่ายตั๋วเป็นประตูสู่ความสนุกสนานและกิจกรรมทั้งหมดที่รอคุณอยู่ภายในฟาร์ม</p><h4>เคล็ดลับ:</h4><p>ตั๋วสำหรับกิจกรรมต่างๆ เช่น การขี่ม้า พายเรือคายัค สามารถซื้อได้ที่จุดขายอาหารแกะ</p>` },
                en: { title: 'Ticket Booth', description: `<p>Start your farm adventure here! The ticket booth is your gateway to all the fun and activities awaiting you inside.</p><h4>Tip:</h4><p>Tickets for activities like horse riding and kayaking can be purchased at the sheep feeding point.</p>` },
                zh: { title: '售票处', description: `<p>从这里开始您的农场探险！售票处是您通往农场内所有乐趣和活动的大门。</p><h4>提示:</h4><p>骑马和皮划艇等活动的门票可以在绵羊饲料销售点购买。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Ticket.jpg'
            },
            photos: {
                th: { title: 'จุดขายรูปภาพ / ร้านค้า', description: `<p>เก็บความทรงจำดีๆ กลับบ้าน! ที่นี่มีช่างภาพมืออาชีพคอยถ่ายภาพของคุณกับบรรยากาศสวยๆ และน้องแกะที่น่ารัก</p><h4>บริการ:</h4><p>มีบริการอัดภาพใส่กรอบ หรือรับเป็นไฟล์ดิจิทัล และยังมีของที่ระลึกอื่นๆ จำหน่าย</p>` },
                en: { title: 'Photo Shop / Souvenirs', description: `<p>Take home your precious memories! Professional photographers are available to capture your moments with the beautiful scenery and lovely sheep.</p><h4>Services:</h4><p>We offer photo printing with frames, digital files, and also sell other souvenirs.</p>` },
                zh: { title: '照相馆/纪念品店', description: `<p>把珍贵的回忆带回家！专业摄影师随时准备为您捕捉与美丽风景和可爱绵羊的精彩瞬间。</p><h4>服务:</h4><p>我们提供带相框的照片打印、数码文件，并出售其他纪念品。</p>` },
                image: 'https://www.brandbuffet.in.th/wp-content/uploads/2014/09/NFC-samsung-printer.jpg'
            },
            cafe: {
                th: { title: 'จุดให้บริการคาเฟ่', description: `<p>พักเหนื่อยและเติมพลังที่คาเฟ่บรรยากาศดีของเรา นอกจากจะมีเครื่องดื่ม ไอศกรีม และเบเกอรี่โฮมเมดแล้ว ยังมีอาหารแสนอร่อย สดใหม่ทุกวัน ปรุงโดยเชฟฝีมือดีที่การันตีความอร่อย</p>` },
                en: { title: 'Café', description: `<p>Take a break and recharge at our cozy café. In addition to drinks, ice cream, and homemade bakery, we also serve delicious meals, freshly prepared daily by our skilled chef who guarantees every dish is a delight.</p>` },
                zh: { title: '咖啡厅', description: `<p>在我们舒适的咖啡厅里休息一下，补充能量。除了饮料、冰淇淋和自制烘焙食品，我们还提供由技艺精湛的厨师每日新鲜烹制的美味佳肴，保证让您满意。</p>` },
                images: [
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Cafe.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Drink1.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Drink2.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Menu1.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Menu2.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Menu3.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Menu5.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Menu4.jpg'
                ]
            },
            horse: {
                th: { title: 'จุดขี่ม้า', description: `<p>สัมผัสประสบการณ์สุดคลาสสิกกับการขี่ม้าชมทิวทัศน์อันงดงามรอบๆ ฟาร์ม โดยมีเจ้าหน้าที่คอยดูแลความปลอดภัยอย่างใกล้ชิด</p><h4>เกร็ดความรู้:</h4><p>ม้าที่นี่แม้จะเป็นม้าท่องเที่ยว แต่ก็มีสายเลือดที่ดีและได้รับการดูแลอย่างดีเยี่ยมเช่นกัน</p>` },
                en: { title: 'Horse Riding', description: `<p>Enjoy a classic experience riding a horse and taking in the beautiful scenery of the farm, with our staff ensuring your safety.</p><h4>Fun Fact:</h4><p>Although our horses are for tourism, they come from good bloodlines and are excellently cared for.</p>` },
                zh: { title: '骑马', description: `<p>享受骑马的经典体验，欣赏农场美丽的风景，我们的工作人员会确保您的安全。</p><h4>小知识:</h4><p>虽然我们的马匹用于旅游，但它们血统优良，并得到了极好的照顾。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Horse.jpg'
            },
            kayak: {
                th: { title: 'จุดพายเรือคายัค', description: `<p>เปลี่ยนบรรยากาศมาทำกิจกรรมทางน้ำกับการพายเรือคายัคในน้ำผุดธรรมชาติของฟาร์ม เป็นกิจกรรมที่สนุกสนานสำหรับทุกคนในครอบครัว</p>` },
                en: { title: 'Kayaking', description: `<p>Switch things up with a water activity! Enjoy kayaking in the farm's natural spring. A fun activity for the whole family.</p>` },
                zh: { title: '皮划艇', description: `<p>换个花样，来参加水上活动吧！在农场的天然泉水中享受皮划艇的乐趣。这是一项适合全家人的有趣活动。</p>` },
                images: [
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Kayak0.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Kayak1.jpg'
                ]
            },
            'sheep-feed': {
                th: { title: 'จุดให้อาหารแกะ', description: `<p>ไฮไลท์ของฟาร์ม! มาใกล้ชิดกับฝูงแกะคอร์ริเดลแสนน่ารักและป้อนอาหารให้พวกมันด้วยมือของคุณเอง</p><h4>เกร็ดความรู้:</h4><p>แกะพันธุ์คอร์ริเดลมีชื่อเสียงจากการให้ทั้งขนคุณภาพดีและเนื้อรสเลิศ</p>` },
                en: { title: 'Sheep Feeding', description: `<p>The farm's highlight! Get up close with our lovely Corriedale sheep and feed them by hand.</p><h4>Fun Fact:</h4><p>Corriedale sheep are famous for providing both high-quality wool and delicious meat.</p>` },
                zh: { title: '绵羊喂食', description: `<p>农场的亮点！近距离接触我们可爱的科里代尔绵羊，并亲手喂养它们。</p><h4>小知识:</h4><p>科里代尔绵羊以其优质的羊毛和美味的肉而闻名。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Feed.jpg'
            },
            'lamb-feed': {
                th: { title: 'จุดขายอาหารแกะและนมแกะ', description: `<p>จำหน่ายหญ้าและอาหารสำหรับน้องแกะ และขวดนมสำหรับป้อนลูกแกะแสนน่ารัก นอกจากนี้สามารถซื้อตั๋วขี่ม้า, พายเรือ และยืมอุปกรณ์สำหรับทำกิจกรรมได้ที่จุดนี้เลยครับ</p>` },
                en: { title: 'Feed & Milk Shop', description: `<p>Here you can buy grass and feed for the sheep, and milk bottles for the adorable lambs. You can also purchase tickets for horse riding, kayaking, and borrow equipment here.</p>` },
                zh: { title: '饲料和牛奶销售点', description: `<p>在这里您可以购买喂羊的草和饲料，以及喂可爱小羊的奶瓶。您还可以在此购买骑马、皮划艇的门票并租借设备。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Glass.jpg'
            },
            duck: {
                th: { title: 'จุดเลี้ยงเป็ดปักกิ่ง', description: `<p>ชมความน่ารักของฝูงเป็ดปักกิ่งสีขาวสะอาดตาที่กำลังเล่นน้ำและใช้ชีวิตอย่างมีความสุขในพื้นที่ของพวกมัน</p>` },
                en: { title: 'Pekin Ducks Area', description: `<p>Watch the adorable flock of white Pekin ducks as they play in the water and enjoy their day.</p>` },
                zh: { title: '北京鸭区', description: `<p>观看可爱的白色北京鸭群在水中嬉戏，享受它们的一天。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Duck1.jpg'
            },
            peafowl: {
                th: { title: 'จุดเลี้ยงนกยูงอินเดีย', description: `<p>ตื่นตาตื่นใจไปกับความสง่างามของนกยูงอินเดีย ที่กำลังรำแพนหางอวดลวดลาย "แววมยุรา" อันงดงามตระการตา</p>` },
                en: { title: 'Indian Peafowl Area', description: `<p>Be amazed by the elegance of the Indian peafowl, displaying its stunningly beautiful tail feathers.</p>` },
                zh: { title: '印度孔雀区', description: `<p>惊叹于印度孔雀的优雅，它们展示着令人惊叹的美丽尾羽。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Indian_Peafowl.jpg'
            },
            rabbit: {
                th: { title: 'จุดให้อาหารกระต่าย', description: `<p>มุมโปรดของเด็กๆ ที่จะได้พบปะกับฝูงกระต่ายหลากหลายสายพันธุ์ที่น่ารักและเป็นมิตร</p>` },
                en: { title: 'Rabbit Feeding', description: `<p>A favorite spot for children, where they can meet and interact with various friendly rabbit breeds.</p>` },
                zh: { title: '兔子喂食', description: `<p>孩子们最喜欢的地方，他们可以在这里遇见并与各种友好的兔子品种互动。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Rabbit1.jpg'
            },
            drawing: {
                th: { title: 'จุดวาดภาพระบายสี', description: `<p>ปลดปล่อยจินตนาการและความคิดสร้างสรรค์ที่มุมศิลปะของเรา ที่นี่มีอุปกรณ์ให้คุณได้สร้างสรรค์ผลงานและนำกลับไปเป็นของที่ระลึก</p>` },
                en: { title: 'Painting Corner', description: `<p>Unleash your imagination and creativity at our art corner. We provide all the materials for you to create your own masterpiece to take home as a souvenir.</p>` },
                zh: { title: '绘画角', description: `<p>在我们的艺术角释放您的想象力和创造力。我们提供所有材料，让您创作自己的杰作并带回家作为纪念品。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Paint.jpg'
            },
            restroom: {
                th: { title: 'ห้องน้ำ', description: `<p>ห้องน้ำสะอาดพร้อมให้บริการแก่ทุกท่าน ตั้งอยู่บริเวณใกล้คาเฟ่ เพื่อความสะดวกสบายของนักท่องเที่ยว</p>` },
                en: { title: 'Restrooms', description: `<p>Clean restrooms are available for everyone, located near the café for your convenience.</p>` },
                zh: { title: '洗手间', description: `<p>为方便游客，干净的洗手间位于咖啡厅附近，供大家使用。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Toilets.jpg'
            },
            'albino-buffalo': {
                th: { title: 'จุดให้อาหารควายเผือก', description: `<p>พบกับ 'พี่บัวขาว' ควายเผือกแสนเชื่อง สัตว์มงคลหาชมได้ยาก คุณสามารถป้อนหญ้าและถ่ายรูปกับพี่บัวขาวได้อย่างใกล้ชิด</p><h4>เกร็ดความรู้:</h4><p>ควายเผือกเกิดจากภาวะผิวเผือกที่เกิดจากยีนด้อย ในสมัยโบราณถือเป็นสัตว์มงคล</p>` },
                en: { title: 'Albino Buffalo Feeding', description: `<p>Meet 'P'Buakaw,' our gentle albino buffalo, a rare and auspicious animal. You can feed him grass and take photos up close.</p><h4>Fun Fact:</h4><p>Albino buffaloes result from a recessive gene causing albinism and were considered auspicious in ancient times.</p>` },
                zh: { title: '白化水牛喂食', description: `<p>来见见我们温顺的白化水牛“P'Buakaw”，这是一种罕见而吉祥的动物。您可以近距离喂它草并与它合影。</p><h4>小知识:</h4><p>白化水牛是由隐性基因引起的白化病造成的，在古代被认为是吉祥的动物。</p>` },
                images: [
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Buff_0.jpg',
                    'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Buff_1.jpg'
                ]
            },
            souvenirs: {
                th: { title: 'จุดจำหน่ายของที่ละลึกจากขนแกะและผลิตภัณฑ์จากแกะคอร์ริเดล', description: `<p>เลือกซื้อผลิตภัณฑ์จากแกะคอร์ริเดล และตุ๊กตาขนแกะนุ่มฟู ของฝากสุดพิเศษจากฟาร์มของเรา</p>` },
                en: { title: 'Corriedale Sheep Products & Souvenirs', description: `<p>Shop for products from Corriedale sheep and fluffy wool dolls, special souvenirs from our farm.</p>` },
                zh: { title: '科里代尔羊毛产品及纪念品', description: `<p>选购科里代尔羊产品和柔软的羊毛娃娃，作为我们农场的特别纪念品。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Souvenirs.jpg'
            },
            snacks: { // <-- NEW SNACK POI
                th: { title: 'จุดขายผลไม้และขนมขบเคี้ยว', description: `<p>แวะเติมความสดชื่นด้วยผลไม้ตามฤดูกาล และเลือกซื้อขนมขบเคี้ยวหลากหลายชนิดสำหรับทานเล่นระหว่างเที่ยวชมฟาร์ม</p>` },
                en: { title: 'Fruit & Snack Stall', description: `<p>Stop by for some refreshing seasonal fruits and choose from a variety of snacks to enjoy while exploring the farm.</p>` },
                zh: { title: '水果与零食摊', description: `<p>停下来品尝清爽的时令水果，并选择各种零食，在游览农场时享用。</p>` },
                image: 'https://raw.githubusercontent.com/kaehcare/StardoiFarmKhaoyaiMap/refs/heads/main/Fruit.jpg'
            }
        };

        const funFacts = {
            th: [
                "แกะมีรูม่านตาเป็นสี่เหลี่ยมผืนผ้า ทำให้มองเห็นได้เกือบ 360 องศา", "นกยูงตัวผู้เท่านั้นที่รำแพนหางได้ เพื่อดึงดูดตัวเมีย", "ควายเผือกไม่ใช่สัตว์เผือกจริงๆ แต่เป็นภาวะทางพันธุกรรมที่ทำให้มีสีชมพู", "กระต่ายสามารถกระโดดได้สูงถึง 1 เมตร และไกลถึง 3 เมตร", "เป็ดสามารถหลับตาข้างเดียวได้ เพื่อระวังภัยในขณะที่พักผ่อน",
                "แกะพันธุ์คอร์ริเดลเกิดจากการผสมข้ามพันธุ์ระหว่างแกะพันธุ์ลินคอล์นและเมอริโน", "ขนของแกะคอร์ริเดลมีความหนาแน่นและยาว เหมาะสำหรับทำเส้นด้ายคุณภาพสูง", "แกะคอร์ริเดลตัวเต็มวัยสามารถให้ขนได้มากถึง 5-7 กิโลกรัมต่อปี", "แกะคอร์ริเดลปรับตัวได้ดี สามารถเลี้ยงได้ในสภาพอากาศที่หลากหลาย", "แกะคอร์ริเดลมีนิสัยสงบและเป็นมิตร ทำให้ง่ายต่อการจัดการในฟาร์ม", "แกะคอร์ริเดลไม่มีเขา ทั้งในตัวผู้และตัวเมีย", "ชื่อ 'คอร์ริเดล' มาจากชื่อฟาร์มในนิวซีแลนด์ที่พัฒนาสายพันธุ์นี้ขึ้นมา", "ลูกแกะคอร์ริเดลเติบโตเร็วและมีโครงสร้างร่างกายที่แข็งแรง", "ม้าจะยืนหลับ แต่เมื่อต้องการหลับลึก พวกมันจะนอนลง", "หัวใจของม้ามีน้ำหนักประมาณ 4.5 กิโลกรัม", "เสียงร้องของนกยูงดังมากและใช้เพื่อเตือนภัยได้", "กระต่ายจะกินมูลของตัวเองชนิดพิเศษ เพื่อดูดซึมสารอาหารให้ได้มากที่สุด", "ควายชอบแช่โคลนเพื่อป้องกันแมลงและแสงแดด", "ม้ามีมุมมองเกือบ 360 องศา แต่มีจุดบอดอยู่ตรงหน้าและหลังของมันโดยตรง"
            ],
            en: [
                "Sheep have rectangular pupils, giving them almost 360-degree vision.", "Only male peacocks can display their tail feathers to attract mates.", "Albino buffaloes are not true albinos but have a genetic condition that gives them a pinkish color.", "Rabbits can jump up to 1 meter high and 3 meters long.", "Ducks can sleep with one eye open to watch for predators while resting.",
                "Corriedale sheep originated from a cross between Lincoln and Merino sheep.", "Corriedale wool is dense and long, ideal for high-quality yarn.", "An adult Corriedale can produce up to 5-7 kg of wool annually.", "They are highly adaptable and can be raised in various climates.", "They have a calm and friendly temperament, making them easy to manage.", "Both rams and ewes are naturally polled (hornless).", "The name 'Corriedale' comes from the New Zealand farm where the breed was developed.", "Corriedale lambs grow quickly and have a strong frame.", "Horses sleep standing up but lie down for deep REM sleep.", "A horse's heart weighs about 4.5 kilograms.", "A peacock's call is very loud and can be used as an alarm.", "Rabbits eat their own special droppings (cecotropes) to absorb maximum nutrients.", "Buffaloes love mud baths to protect against insects and the sun.", "Horses have nearly 360-degree vision but have blind spots directly in front and behind them."
            ],
            zh: [
                "绵羊的瞳孔是长方形的，这使它们拥有近360度的视野。", "只有雄性孔雀才能展示它们的尾羽来吸引配偶。", "白化水牛并非真正的白化病，而是一种遗传病，使其呈现粉红色。", "兔子可以跳到1米高，3米远。", "鸭子可以睁一只眼闭一只眼睡觉，以便在休息时警惕捕食者。",
                "科里代尔羊是由林肯羊和美利奴羊杂交而成。", "科里代尔羊毛浓密而长，是制作高品质纱线的理想选择。", "一只成年科里代尔羊每年可产毛5-7公斤。", "它们适应性强，可在多种气候下饲养。", "它们性情温和友好，易于管理。", "公羊和母羊天生无角。", "“科里代尔”这个名字来源于新西兰开发该品种的农场。", "科里代尔羔羊生长迅速，体格强壮。", "马站着睡觉，但需要躺下才能进入深度快速眼动睡眠。", "一匹马的心脏重约4.5公斤。", "孔雀的叫声非常响亮，可以用作警报。", "兔子会吃自己的特殊粪便（盲肠便）以吸收最多的营养。", "水牛喜欢泥浴以防止昆虫和阳光照射。", "马的视野接近360度，但在正前方和正后方有盲点。"
            ]
        };

        // Get Modal elements
        const modal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modal-title');
        const mediaContainer = document.getElementById('media-container'); 
        const modalDescription = document.getElementById('modal-description');
        const closeButton = document.querySelector('.close-button');
        const speakButton = document.getElementById('speak-btn');
        const funFactBtn = document.getElementById('fun-fact-btn');
        const factModal = document.getElementById('factModal');
        const factTitle = document.getElementById('fact-title');
        const factText = document.getElementById('fact-text');
        
        let voices = [];
        function populateVoiceList() {
            voices = speechSynthesis.getVoices();
        }
        populateVoiceList();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }

        function switchLanguage(lang) {
            speechSynthesis.cancel();
            currentLang = lang;
            document.documentElement.lang = lang;
            document.body.className = `lang-${lang}`; // Set body class for font switching

            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (translations[key]) {
                    el.textContent = translations[key][lang];
                }
            });

            document.querySelectorAll('.poi').forEach(poi => {
                const poiId = poi.dataset.id;
                if (poiData[poiId] && poiData[poiId][lang]) {
                    poi.title = poiData[poiId][lang].title;
                }
            });

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            funFactBtn.title = translations.fun_fact_tooltip[currentLang];
            document.getElementById('tiktok-btn').title = translations.tiktok_tooltip[currentLang];
        }

        let slideIndex = 1;

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("slide");
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slides[slideIndex-1].style.display = "block";
        }

        document.querySelectorAll('.poi').forEach(poi => {
            const openModal = (event) => {
                event.preventDefault();
                const poiId = poi.dataset.id;
                const data = poiData[poiId];

                if (data && data[currentLang]) {
                    modalTitle.textContent = data[currentLang].title;
                    modalDescription.innerHTML = data[currentLang].description;
                    
                    mediaContainer.innerHTML = ''; 
                    if (data.images && Array.isArray(data.images)) {
                        const slideshowHTML = `
                            <div class="slideshow-container">
                                ${data.images.map((imgSrc, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''}">
                                        <img src="${imgSrc}" alt="Image ${index + 1}">
                                    </div>
                                `).join('')}
                                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                                <a class="next" onclick="plusSlides(1)">&#10095;</a>
                            </div>
                        `;
                        mediaContainer.innerHTML = slideshowHTML;
                        slideIndex = 1;
                        showSlides(slideIndex);
                    } else if (data.image) {
                        const singleImageHTML = `<img src="${data.image}" alt="${data[currentLang].title}">`;
                        mediaContainer.innerHTML = singleImageHTML;
                    }
                    
                    modal.style.display = 'flex';
                }
            };
            poi.addEventListener('pointerup', openModal);

        });

        document.querySelectorAll('.lang-btn').forEach(btn => {
            const switchLangHandler = (event) => {
                event.preventDefault();
                switchLanguage(btn.dataset.lang);
            };
            btn.addEventListener('pointerup', switchLangHandler);

        });

        speakButton.addEventListener('click', () => {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                return;
            }

            const titleText = modalTitle.textContent;
            const descriptionText = modalDescription.textContent; 
            const textToSpeak = `${titleText}. ${descriptionText}`;

            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            
            const langMap = {
                th: 'th-TH',
                en: 'en-US',
                zh: 'zh-CN'
            };
            utterance.lang = langMap[currentLang];

            const femaleVoice = voices.find(voice => 
                voice.lang.startsWith(utterance.lang.substring(0, 2)) &&
                (voice.name.includes('Female') || voice.name.includes('Kanya') || voice.gender === 'female' || voice.name.includes('女') || voice.name.includes('Ting-Ting'))
            );

            if (femaleVoice) {
                utterance.voice = femaleVoice;
            }

            speechSynthesis.speak(utterance);
        });

        // --- Fun Fact Logic ---
        funFactBtn.addEventListener('click', () => {
            const factsInCurrentLang = funFacts[currentLang];
            const randomIndex = Math.floor(Math.random() * factsInCurrentLang.length);
            const randomFact = factsInCurrentLang[randomIndex];

            factTitle.textContent = translations.fun_fact_title[currentLang];
            factText.textContent = randomFact;
            factModal.style.display = 'flex';
        });

        function closeModal(modalElement) {
            speechSynthesis.cancel(); 
            modalElement.style.display = 'none';
        }

        // Close logic for main modal
        modal.querySelector('.close-button').addEventListener('click', () => closeModal(modal));
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal(modal);
            }
        });

        // Close logic for fact modal
        factModal.querySelector('.close-button').addEventListener('click', () => closeModal(factModal));
        window.addEventListener('click', (event) => {
            if (event.target === factModal) {
                closeModal(factModal);
            }
        });

        window.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                closeModal(modal);
                closeModal(factModal);
            }
        });

        switchLanguage(currentLang);

    </script>
</body>
</html>
